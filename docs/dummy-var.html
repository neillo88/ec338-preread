<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EC338 Pre-reading - 5&nbsp; Dummy Variables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./compendium.html" rel="next">
<link href="./geometry-ols.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./linear-reg.html">Test Part</a></li><li class="breadcrumb-item"><a href="./dummy-var.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dummy Variables</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">EC338 Pre-reading</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Test Part</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear-reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Linear Regression Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ordinary Least Squares</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./geometry-ols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Geometry of OLS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dummy-var.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dummy Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./compendium.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Compendium</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#fixed-effects" id="toc-fixed-effects" class="nav-link active" data-scroll-target="#fixed-effects"><span class="header-section-number">5.1</span> Fixed Effects</a></li>
  <li><a href="#multi-level-fixed-effects" id="toc-multi-level-fixed-effects" class="nav-link" data-scroll-target="#multi-level-fixed-effects"><span class="header-section-number">5.2</span> Multi-level Fixed Effects</a></li>
  <li><a href="#fixed-effects-in-panel-data" id="toc-fixed-effects-in-panel-data" class="nav-link" data-scroll-target="#fixed-effects-in-panel-data"><span class="header-section-number">5.3</span> Fixed Effects in Panel Data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./linear-reg.html">Test Part</a></li><li class="breadcrumb-item"><a href="./dummy-var.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dummy Variables</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-dummy" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dummy Variables</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Dummy variables are used extensively in Microeconometrics. They are used to model discrete public policy and experimental ‘treatments’ in Microeconomics and are the building blocks of “fixed effects” used widely in Microeconomics models.</p>
<p>Any dummy variable, <span class="math inline">\(D_i=\mathbf{1}\{true\}\)</span>, splits the sample into two groups: true (e.g.&nbsp;treated) and false (e.g.&nbsp;control/untreated). In a basic setting the use a of dummy variable might be relatively straight forward. For example, consider a linear model using to assess a single treatment from a randomized control trial,</p>
<p><span class="math display">\[
Y_i = \beta_{10}+\beta_{11} D_{1i} + \varepsilon_i
\]</span></p>
<p>where <span class="math inline">\(D_{1i} = \mathbf{1}\{treated\}\)</span> identifies those who are treated in the sample.</p>
<p>For ease of demonstration, let us assume that the data is sorted on <span class="math inline">\(D_i\)</span>: the first <span class="math inline">\(N_0\)</span> observations are the untreated control group, and the next <span class="math inline">\(N_1 = N-N_0\)</span> the treated. From previous chapters, we know that the matrix of regressors in this model is given by,</p>
<p><span class="math display">\[
X_1=[\ell,D_1]=\begin{bmatrix}1 &amp; 0 \\ \vdots &amp; \vdots \\ 1 &amp; 0 \\ 1 &amp; 1 \\ \vdots &amp; \vdots \\ 1 &amp; 1 \end{bmatrix}
\]</span></p>
<p>The above matrix has rank 2, as the columns are linearly independent. Likewise, the rank of the <span class="math inline">\(2\times 2\)</span> matrix <span class="math inline">\(X_1'X_1\)</span> is also 2 (i.e.&nbsp;full rank) and is therefore invertible. If <span class="math inline">\(N=N_0\)</span> - i.e., no units were treated - the matrix would be rank deficient. Similarly, if <span class="math inline">\(N_0=0\)</span> - i.e., all units were treated - <span class="math inline">\(D_1\)</span> would be a column of <span class="math inline">\(1\)</span>’s, colinear with the constant.</p>
<p>Consider then the regressor <span class="math inline">\(D_{2i} = 1-D_{1i} = \mathbf{1}\{control\}\)</span>. What would happen if we included <span class="math inline">\(D_{2i}\)</span> in the above model? The matrix of regressors would be,</p>
<p><span class="math display">\[
X=[\ell,D_1,D_2]=\begin{bmatrix}1 &amp; 0 &amp;1 \\ \vdots &amp; \vdots &amp; \vdots \\ 1 &amp; 0 &amp;1 \\ 1 &amp; 1 &amp;0\\ \vdots &amp; \vdots &amp; \vdots \\ 1 &amp; 1 &amp; 0 \end{bmatrix}
\]</span></p>
<p>The rank of matrix <span class="math inline">\(X\)</span> is not 3; it remains 2. This because the three columns of <span class="math inline">\(X\)</span> are linearly dependent:</p>
<p><span class="math display">\[
\begin{bmatrix}1 \\ \vdots \\ 1 \\ 1 \\ \vdots \\ 1 \end{bmatrix}=\begin{bmatrix}0 \\ \vdots \\ 0 \\ 1 \\ \vdots \\ 1 \end{bmatrix}+\begin{bmatrix}1 \\ \vdots \\ 1 \\ 0\\  \vdots \\  0 \end{bmatrix}
\]</span></p>
<p>You can have ANY two of the columns in the model, but not all three. Moreover, regardless which two you choose, the projection remains the same. Consider, the three possible models,</p>
<p><span class="math display">\[
\begin{aligned}
Y_i =&amp; \beta_{10}+\beta_{11} D_{1i}+\varepsilon_i=X_1\beta_1+\varepsilon_i &amp; \qquad\text{where} \quad X_1 = [\ell\;D_1] \\
Y_i =&amp; \beta_{20}+\beta_{22} D_{2i}+\varepsilon_i=X_2\beta_2+\varepsilon_i &amp; \qquad\text{where} \quad X_2 = [\ell\;D_2] \\
Y_i =&amp; \beta_{01}D_{1i} + \beta_{02}D_{2i}+\varepsilon_i=X_0\beta_0+\varepsilon_i &amp; \qquad\text{where} \quad X_0 = [D_1\;D_2]
\end{aligned}
\]</span></p>
<p>It turns out that,</p>
<p><span class="math display">\[
P_1 = X_1(X_1'X_1)^{-1}X_1' = P_2 = P_0
\]</span></p>
<p>Similarly,</p>
<p><span class="math display">\[
M_1 = I_n-X_1(X_1'X_1)^{-1}X_1' = M_2 = M_0
\]</span></p>
<p>Thus, the vector of residuals estimated by OLS for the above three models are all the same.</p>
<p><strong>Why does this matter?</strong> Consider, the case where you include a categorical covariate (‘control’ variable) in your model. We know from EC226 that a categorical variable must be included in the model as a set of dummy variables: one for each category.</p>
<p><span class="math display">\[
Y_i = \alpha + \beta Z_i + \sum_{j=2}^J \gamma_j D_{ji} + \upsilon_i
\]</span></p>
<p>We must exclude 1 of the J categories since the model contains a constant and all the dummy variables (for the <span class="math inline">\(J\)</span> categories) add up to 1 (or the vector <span class="math inline">\(\ell\)</span>). Here, I exclude the first category, <span class="math inline">\(j=1\)</span>.</p>
<p>We know from the previous discussion on partitioned regression that we can estimate the scalar parameter <span class="math inline">\(\beta\)</span> by first regressing <span class="math inline">\(Z_i\)</span> on all other regressors,</p>
<p><span class="math display">\[
Z_i = \delta + \sum_{j=2}^J \psi_j D_{ji} + \nu_i
\]</span></p>
<p>Next we regress the outcome, <span class="math inline">\(Y_i\)</span>, on the residuals from the above equation. Using vector notation, this model is given by,</p>
<p><span class="math display">\[
  Y_i = \beta \hat{\nu_i}+\zeta_i = \beta M_{D_1}Z_i+\zeta_i
\]</span></p>
<p>where <span class="math inline">\(M_{D_1}\)</span> is the orthogonal projection matrix from the regression of <span class="math inline">\(Z_i\)</span> on the full set of dummy variables (excluding category 1) and constant. The OLS estimator for <span class="math inline">\(\beta\)</span> is given by,</p>
<p><span class="math display">\[
  \hat{\beta} = (Z'M_{D_1}Z)^{-1}Z'M_{D_1}Y
\]</span></p>
<p>There are two things to take from this equation. First, we get the same result whether or not we first orthogonalize <span class="math inline">\(Y_i\)</span> on the full set of covariates, since <span class="math inline">\(M_D\)</span> is idempotent: <span class="math inline">\(M_{D_1} = M_{D_1}M_{D_1}\)</span>. Thus,</p>
<p><span class="math display">\[
  (Z'M_{D_1}Z)^{-1}Z'M_{D_1}M_{D_1}Y = (Z'M_{D_1}Z)^{-1}Z'M_{D_1}Y = \hat{\beta}
\]</span></p>
<p>Second, the choice of base category among the control variables is irrelevant. Indeed, even if we dropped the constant and included a dummy variable for all <span class="math inline">\(J\)</span> categories, we would achieve the same estimator. This is because,</p>
<p><span class="math display">\[
M_{D_0} = M_{D_1} = M_{D_2} ... = M_{D_J}
\]</span></p>
<p>where <span class="math inline">\(M_{D_0}\)</span> is the orthogonal projection matrix from a regression with all <span class="math inline">\(J\)</span> categories (and no constant) and <span class="math inline">\(M_{D_j}\)</span> is the orthogonal projection matrix from a regression with the <span class="math inline">\(j\)</span>-th category excluded (and a constant).</p>
<section id="fixed-effects" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="fixed-effects"><span class="header-section-number">5.1</span> Fixed Effects</h2>
<p>One way of interpreting a model with an (exhaustive) set of dummy variables is as a model with a group-specific constant. Since, it makes no difference to parameter of interest whether you include the constant and <span class="math inline">\(J-1\)</span> dummies or exclude the constant and include all <span class="math inline">\(J\)</span> dummy variables, we can consider the model,<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><span class="math display">\[
Y_i = \beta Z_i + \sum_{j=1}^J \gamma_j D_{ji} + \upsilon_i
\]</span></p>
<p>A common short-hand notation for such a set-up is,</p>
<p><span class="math display">\[
Y_i = \beta Z_i + \gamma_j + \upsilon_i
\]</span></p>
<p>where <span class="math inline">\(\gamma_j\)</span> signifies the presence of <span class="math inline">\(J\)</span> group fixed effects. For each group the constant, denoted by <span class="math inline">\(\gamma\)</span>, changes. However, it is important to remember that this notation is a short-hand. The full set of regressors includes <span class="math inline">\(J\)</span> dummy variables (or a constant and <span class="math inline">\(J-1\)</span> dummy variables). When applying this shorthand it is standard to drop the constant term.</p>
</section>
<section id="multi-level-fixed-effects" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="multi-level-fixed-effects"><span class="header-section-number">5.2</span> Multi-level Fixed Effects</h2>
<p>Suppose you had two categorical variables, where one was a proper subset of the other. For example, an individual level dataset that contained information on the country in the UK where an individual lived (i.e.&nbsp;England, Scotland, Wales, Northern Ireland) and their county (i.e.&nbsp;Warwickshire, Oxfordshire, Cambridgeshire, etc.). Since county borders do not overlap country borders in the UK, an individuals county perfectly predicts their country.</p>
<p>Consider then the model,</p>
<p><span class="math display">\[
Y_i = \beta Z_i + \gamma_j + \delta_k + \upsilon_i
\]</span></p>
<p>where <span class="math inline">\(j\)</span> represents country fixed effects and <span class="math inline">\(k\)</span> county fixed effects. Let’s assume the data is sorted by country and then county, and that there are two countries, each with 2 counties. (An obvious simplification.) If we consider the matrix of fixed effects, they can be written as,</p>
<p><span class="math display">\[
  \begin{bmatrix}1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 \\
  \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\
  \vdots &amp; \vdots &amp; 1 &amp; 0 &amp; 0 &amp; 0 \\
  \vdots &amp; \vdots &amp; 0 &amp; 1 &amp; 0 &amp; 0 \\
  \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\
  1 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 \\
  0 &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\
  \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\
  \vdots &amp; \vdots &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\
  \vdots &amp; \vdots &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
  \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots \\
  0&amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
  \end{bmatrix}
\]</span></p>
<p>We can immediately see that the matrix is rank deficient. Columns 3 and 4 add up to give you column 1. Likewise, columns 5 and 6 add up to give you column 2. This implies that the matrix is not invertible and we cannot separately identify all fixed effects.</p>
<p>If we include column 1 (i.e.&nbsp;dummy variable for country <span class="math inline">\(j=1\)</span>), we must exclude <em>either</em> column 3 or 4 (i.e.&nbsp;one of the counties in country <span class="math inline">\(j=1\)</span>). For the same reasons discussed above (when selecting between the inclusion of the constant and dummy variables), it makes no difference whether we include column 1 and drop either column 3 or 4; or keep columns 3 and 4, and exclude column 1. Thus, we can only identify the model,<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p><span class="math display">\[
Y_i = \beta Z_i + \tilde{\delta}_k + \upsilon_i
\]</span> The general rule is, you retain the “highest” level of fixed effect. In this application, the model with county fixed effects.</p>
</section>
<section id="fixed-effects-in-panel-data" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="fixed-effects-in-panel-data"><span class="header-section-number">5.3</span> Fixed Effects in Panel Data</h2>
<p>Fixed effects are used extensively in panel data models. They are used to control for time-invariant, unit-level heterogeneity and flexible, aggregate time trends. Consider, the model</p>
<p><span class="math display">\[
  Y_{it} = \beta Z_{it} + \alpha_i + \delta_t + \varepsilon_{it}
\]</span></p>
<p>As before, this notation is used as a shorthand. The full set of unit fixed effects are given by,</p>
<p><span class="math display">\[
\alpha_i=\sum_{j=1}^N\alpha_j\mathbf{1}\{i=j\}
\]</span></p>
<p>and the time fixed effects are given by,</p>
<p><span class="math display">\[
\delta_t=\sum_{j=1}^T\delta_k\mathbf{1}\{t=k\}
\]</span></p>
<p>What if we wanted to include group-level controls in the model; e.g., an indicator for treatment group status? If group membership is stable over time, then for the reasons discussed above, group membership is perfectly co-linear with the unit fixed effects. The dummy variables for treated units (a subset of the unit fixed effects) add up to the dummy variable for the treated group. You will see this again in EC338.</p>
<p>A final point on this. What if you need to include a variable that identifies treatment-group status in the model for <em>identification</em>. For example, in a simple two-group-two-period difference-in-differences model you have,</p>
<p><span class="math display">\[
  Y_{it} = \alpha + \psi D_i + \delta T_t + \beta D_i\cdot T_t + \varepsilon_{it}
\]</span></p>
<p>where <span class="math inline">\(D_i = \mathbf{1}\{treated\}\)</span> and <span class="math inline">\(T_t = \mathbf{1}\{t\geq t_0\}\)</span> where <span class="math inline">\(t_0\)</span> is the period of treatment. The coefficient on the interaction term is the parameter of interest. If we include unit fixed effects in this model,</p>
<p><span class="math display">\[
  Y_{it} = \alpha_i + \delta T_t + \beta D_i\cdot T_t + \upsilon_{it}
\]</span></p>
<p>then we drop the treatment-group indicator dummy variable: <span class="math inline">\(D_i\)</span>. And if we include include time fixed effects,</p>
<p><span class="math display">\[
  Y_{it} = \alpha_i + \delta_t + \beta D_i\cdot T_t + \upsilon_{it}
\]</span></p>
<p>we drop <span class="math inline">\(T_t\)</span>. Is this a problem for identification? No, the group indicator, <span class="math inline">\(D_i\)</span>, is “implied” by unit fixed effects. Because the group dummy is perfectly co-linear with the unit fixed effects, you could always have included it by excluding one of the unit fixed effects. In fact, <em>with a balanced panel</em>, replacing the group indicator with unit fixed effects will not actually change the estimated coefficient on the interaction term. It will, however, reduce the standard error of estimator.</p>
<p>For this reason, the most common notation used for (static) difference-in-differences is,</p>
<p><span class="math display">\[
  Y_{it} = \alpha_i + \delta_t + \beta D_{it} + \upsilon_{it}
\]</span></p>
<p>where <span class="math inline">\(D_{it} = \mathbf{1}\{treated\}\cdot\mathbf{1}\{t\geq t_0\}\)</span>. This notation is particularly useful because it does not need to be adapted when you add more time periods. However, it can only be used in applications with longitudinal data. If you are using repeated cross-sections then you cannot include unit fixed effects and must retain a treatment group indicator. We will discuss this further in EC338.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The choice of base category makes a difference when the variable of interest is a categorical variable. In this instance, the choice of base category changes the interpretation of the coefficient. This discussion relates more to instances where the categorical variable is included as a control variable.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>I deliberately changed the parameters denoting the county fixed effects from <span class="math inline">\(\delta_k\)</span> to <span class="math inline">\(\tilde{\delta}_k\)</span> since the true model (data generating process) may contain both country and county fixed effects. However, we cannot separately identify these. We can identify <span class="math inline">\(\tilde{\delta}_k\)</span>: a combination of both sets of parameters.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./geometry-ols.html" class="pagination-link" aria-label="The Geometry of OLS">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Geometry of OLS</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./compendium.html" class="pagination-link" aria-label="Compendium">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Compendium</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>